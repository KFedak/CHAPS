---
title: "Descriptives and Exploratory Analysis"
author: "Kristen Fedak"
date: "11/1/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE)
library(tidyverse)
library(readxl)
library(knitr)
library(kableExtra)
```

# Participant info

```{r}
participants <- read_rds("output_files/participants.rds") %>%
  mutate_if(is.factor, tolower)
```

```{r}
table_data_sex <- participants %>%
  select(age_months, bmi_pct, height_cm, weight_kg, age_years, sex) %>%
  pivot_longer(cols = -sex, names_to = "var", values_to = "val") %>%
  group_by(var, sex) %>%
  summarise(mean = mean(val, na.rm = TRUE),
            n = n(),
            sd = sd(val, na.rm = TRUE),
            min = min(val, na.rm = TRUE),
            max = max(val, na.rm = TRUE))

table_data_total <- participants %>%
  select(age_months, bmi_pct, height_cm, weight_kg, age_years) %>%
  pivot_longer(cols = everything(), names_to = "var", values_to = "val") %>%
  group_by(var) %>%
  summarise(mean = mean(val, na.rm = TRUE),
            n = n(),
            sd = sd(val, na.rm = TRUE),
            min = min(val, na.rm = TRUE),
            max = max(val, na.rm = TRUE)) %>%
  mutate(sex = "total") %>%
  bind_rows(table_data_sex) %>%
  arrange(var, desc(sex)) %>%
  select(var, sex, n, mean, sd, min, max)
```

```{r}
table_data_cat <- participants %>%
  select(sex, bmi_cat, race_cat, smoke_live, smoke_around, smoke_current, asthma_ever) %>%
  pivot_longer(cols = everything(), names_to = "cat", values_to = "val") %>%
  group_by(cat, val) %>%
  count()
```

### Participant age, height, weight, and BMI percentage

* by gender

```{r}
kable(table_data_total, digits = 0) %>% kable_styling(bootstrap_options = c("striped", "condensed"), full_width = F)
```

### Participant age, height, weight, and BMI percentage

* by gender

```{r}
kable(table_data_total, digits = 0) %>% kable_styling(bootstrap_options = c("striped", "condensed"), full_width = F)
```
